!function(){"use strict";var e={n:function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,{a:a}),a},d:function(t,a){for(var l in a)e.o(a,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:a[l]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.blocks,a=window.wp.primitives,l=()=>React.createElement(a.SVG,{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement(a.Path,{d:"M5 6V5.25C4.69933 5.25 4.42772 5.42957 4.30994 5.70621C4.19216 5.98285 4.25098 6.3031 4.45938 6.51983L5 6ZM10.1012 11.3053H10.8512V11.0032L10.6418 10.7854L10.1012 11.3053ZM10.1012 17.141H9.35121C9.35121 17.3638 9.45026 17.5751 9.62153 17.7176L10.1012 17.141ZM12.6518 19.2632L12.1721 19.8397C12.3891 20.0202 12.6891 20.0636 12.9483 19.9521C13.2076 19.8405 13.3822 19.5928 13.4003 19.3111L12.6518 19.2632ZM13.1619 11.3053L12.6213 10.7854L12.431 10.9833L12.4135 11.2573L13.1619 11.3053ZM18.2632 6L18.8038 6.51983C19.0122 6.3031 19.071 5.98285 18.9532 5.70621C18.8354 5.42957 18.5638 5.25 18.2632 5.25V6ZM4.45938 6.51983L9.56059 11.8251L10.6418 10.7854L5.54062 5.48017L4.45938 6.51983ZM9.35121 11.3053V17.141H10.8512V11.3053H9.35121ZM9.62153 17.7176L12.1721 19.8397L13.1315 18.6866L10.5809 16.5645L9.62153 17.7176ZM13.4003 19.3111L13.9104 11.3532L12.4135 11.2573L11.9034 19.2152L13.4003 19.3111ZM13.7026 11.8251L18.8038 6.51983L17.7225 5.48017L12.6213 10.7854L13.7026 11.8251ZM5 6.75H18.2632V5.25H5V6.75Z"})),n=window.wp.blockEditor,r=window.wp.components,o=window.wp.element,s=window.wp.i18n,c=window.wp.serverSideRender,i=e.n(c),d=({attributes:e})=>{const{type:t}=e;return React.createElement(n.Warning,null,"taxonomy"===t?(0,s.__)("Preview unavailable. The selected taxonomy has no terms assigned to searchable content.","elasticpress"):(0,s.__)("Preview unavailable. There is no searchable content available with the selected metadata.","elasticpress"))},p=({onChange:e,checked:t})=>React.createElement(r.ToggleControl,{checked:t,label:(0,s.__)("Display count","elasticpress"),onChange:e,__nextHasNoMarginBottom:!0}),u=window.wp.data,m=({onChange:e,value:t})=>{const a=(0,u.useSelect)((e=>e("elasticpress").getMetaKeys())),l=(0,o.useMemo)((()=>[{label:(0,s.__)("Select key","elasticpress"),value:""},...a.map((e=>({label:e,value:e})))]),[a]);return React.createElement(r.SelectControl,{disabled:l.length<=1,help:(0,o.createInterpolateElement)((0,s.__)("This is the list of metadata fields indexed in Elasticsearch. If your desired field does not appear in this list please try to <a>sync your content</a>","elasticpress"),{a:React.createElement("a",{href:window.epBlocks.syncUrl})}),label:(0,s.__)("Filter by","elasticpress"),onChange:e,options:l,value:t,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})},h=({onChange:e,orderby:t,order:a})=>{const l=[{label:(0,s.__)("Highest to lowest count"),value:"count/desc"},{label:(0,s.__)("Lowest to highest count"),value:"count/asc"},{label:(0,s._x)("A → Z","label for ordering posts by title in ascending order","elasticpress"),value:"name/asc"},{label:(0,s._x)("Z → A","label for ordering posts by title in descending order","elasticpress"),value:"name/desc"}];return React.createElement(r.SelectControl,{label:(0,s.__)("Order by","elasticpress"),onChange:t=>{const[a,l]=t.split("/");e({order:l,orderby:a})},options:l,value:`${t}/${a}`,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})},b=({onChange:e,value:t})=>React.createElement(r.TextControl,{label:(0,s.__)("Search field placeholder","elasticpress"),value:t,onChange:e,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),_=({onChange:e,value:t})=>{const a=(0,u.useSelect)((e=>e("elasticpress").getTaxonomies())),l=(0,o.useMemo)((()=>[{label:(0,s.__)("Select taxonomy","elasticpress"),value:""},...Object.entries(a).map((([e,t])=>({label:`${t.label} (${e})`,value:e})))]),[a]);return React.createElement(r.SelectControl,{disabled:l.length<=1,help:"",label:(0,s.__)("Filter by","elasticpress"),onChange:e,options:l,value:t,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})},g=()=>React.createElement(r.Placeholder,null,React.createElement(r.Spinner,null)),w=JSON.parse('{"UU":"elasticpress/facet-meta"}'),y={from:[{type:"block",blocks:["elasticpress/facet-meta-range"],transform:e=>(0,t.createBlock)("elasticpress/facet-meta",e)}]};(0,t.registerBlockType)(w.UU,{icon:l,edit:({attributes:e,name:a,setAttributes:c})=>{const{displayCount:u,facet:w,orderby:y,order:v,searchPlaceholder:C,type:f}=e,{title:L}=(0,t.getBlockType)(a),E=(0,n.useBlockProps)(),R="meta"===f?m:_,x=e=>{c({facet:e})};return React.createElement(o.Fragment,null,React.createElement(n.InspectorControls,null,React.createElement(r.PanelBody,{title:(0,s.__)("Settings","elasticpress")},React.createElement(R,{onChange:x,value:w}),"meta"===f?React.createElement(b,{onChange:e=>{c({searchPlaceholder:e})},value:C}):null,React.createElement(p,{checked:u,onChange:e=>{c({displayCount:e})}}),React.createElement(h,{onChange:({orderby:e,order:t})=>{c({orderby:e,order:t})},orderby:y,order:v}))),React.createElement("div",E,w?React.createElement(r.Disabled,null,React.createElement(i(),{attributes:{displayCount:u,facet:w,isPreview:!0,orderby:y,order:v,searchPlaceholder:C,type:f},block:a,EmptyResponsePlaceholder:d,LoadingResponsePlaceholder:g,skipBlockSupportAttributes:!0})):React.createElement(r.Placeholder,{icon:l,label:L},React.createElement(R,{onChange:x,value:w}))))},save:()=>{},transforms:y})}();